{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2 class="mb-4">üìã –ó–∞–ø–∏—Å–∏ –æ –≤—ã–¥–∞–Ω–Ω—ã—Ö –∫–∞–Ω—Ü—Ç–æ–≤–∞—Ä–∞—Ö</h2>

        <!-- –ü–æ–∏—Å–∫ -->
        <form method="GET" action="{% url 'records' %}" class="mb-4">
            <div class="input-group">
                <input type="text" name="search" class="form-control"
                       placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É..." value="{{ search_query }}">
                <button class="btn btn-outline-secondary" type="submit">
                    üîç –ù–∞–π—Ç–∏
                </button>
                {% if search_query %}
                    <a href="{% url 'records' %}" class="btn btn-outline-danger">
                        ‚ùå –°–±—Ä–æ—Å–∏—Ç—å
                    </a>
                {% endif %}
            </div>
        </form>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø–∏—Å–µ–π -->
        {% if records %}
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>#</th>
                            <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                            <th>–ö–∞–Ω—Ü—Ç–æ–≤–∞—Ä</th>
                            <th>–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for record in records %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ record.employee.name }}</td>
                            <td>{{ record.supply.name }}</td>
                            <td>{{ record.taken_date|date:"d.m.Y H:i" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="alert alert-info">
                {% if search_query %}
                    –ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ search_query }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
                {% else %}
                    –ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ –≤—ã–¥–∞–Ω–Ω—ã—Ö –∫–∞–Ω—Ü—Ç–æ–≤–∞—Ä–∞—Ö
                {% endif %}
            </div>
        {% endif %}

        <div class="mt-4">
            <a href="{% url 'index' %}" class="btn btn-outline-primary">
                üìù –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é
            </a>
        </div>
    </div>
</div>
{% endblock %}